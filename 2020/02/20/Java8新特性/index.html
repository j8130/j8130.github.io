<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>Java8新特性 | Hexo</title><meta name="description" content="Java8新特性"><meta name="keywords" content="jdk8"><meta name="author" content="贾沈阳"><meta name="copyright" content="贾沈阳"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Java8新特性"><meta name="twitter:description" content="Java8新特性"><meta name="twitter:image" content="https://images.pexels.com/photos/3755760/pexels-photo-3755760.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"><meta property="og:type" content="article"><meta property="og:title" content="Java8新特性"><meta property="og:url" content="http://yoursite.com/2020/02/20/Java8%E6%96%B0%E7%89%B9%E6%80%A7/"><meta property="og:site_name" content="Hexo"><meta property="og:description" content="Java8新特性"><meta property="og:image" content="https://images.pexels.com/photos/3755760/pexels-photo-3755760.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = '2'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://yoursite.com/2020/02/20/Java8%E6%96%B0%E7%89%B9%E6%80%A7/"><link rel="prev" title="HTTP状态码速查" href="http://yoursite.com/2020/02/28/HTTP%E7%8A%B6%E6%80%81%E7%A0%81%E9%80%9F%E6%9F%A5/"><link rel="next" title="自建服务器踩坑" href="http://yoursite.com/2020/02/18/%E8%87%AA%E5%BB%BA%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%B8%A9%E5%9D%91/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"http://jiasy.ml/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Hexo</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">4</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">1</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Java8中的接口"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">Java8中的接口</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Lambda表达式"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">Lambda表达式</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Lambda与泛型"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text">Lambda与泛型</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#函数式接口"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text">函数式接口</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#方法引用"><span class="toc_mobile_items-number">2.3.</span> <span class="toc_mobile_items-text">方法引用</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#构造方法引用"><span class="toc_mobile_items-number">2.4.</span> <span class="toc_mobile_items-text">构造方法引用</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#比较器应用"><span class="toc_mobile_items-number">2.5.</span> <span class="toc_mobile_items-text">比较器应用</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Optional类"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">Optional类</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#函数式数据处理-重要"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">函数式数据处理&#x3D;&#x3D;[重要]&#x3D;&#x3D;</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#流的操作"><span class="toc_mobile_items-number">4.1.</span> <span class="toc_mobile_items-text">流的操作</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#中间操作（返回值全是Stream）"><span class="toc_mobile_items-number">4.2.</span> <span class="toc_mobile_items-text">中间操作（返回值全是Stream）</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#终端操作"><span class="toc_mobile_items-number">4.3.</span> <span class="toc_mobile_items-text">终端操作</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#收集器"><span class="toc_mobile_items-number">4.4.</span> <span class="toc_mobile_items-text">收集器</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#分组操作"><span class="toc_mobile_items-number">4.4.1.</span> <span class="toc_mobile_items-text">分组操作</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#结果转换"><span class="toc_mobile_items-number">4.4.2.</span> <span class="toc_mobile_items-text">结果转换</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#分区操作"><span class="toc_mobile_items-number">4.4.3.</span> <span class="toc_mobile_items-text">分区操作</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#数值流"><span class="toc_mobile_items-number">4.5.</span> <span class="toc_mobile_items-text">数值流</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#流的创建"><span class="toc_mobile_items-number">4.6.</span> <span class="toc_mobile_items-text">流的创建</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#流的并发"><span class="toc_mobile_items-number">4.7.</span> <span class="toc_mobile_items-text">流的并发</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Java8中的接口"><span class="toc-number">1.</span> <span class="toc-text">Java8中的接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lambda表达式"><span class="toc-number">2.</span> <span class="toc-text">Lambda表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Lambda与泛型"><span class="toc-number">2.1.</span> <span class="toc-text">Lambda与泛型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数式接口"><span class="toc-number">2.2.</span> <span class="toc-text">函数式接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#方法引用"><span class="toc-number">2.3.</span> <span class="toc-text">方法引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#构造方法引用"><span class="toc-number">2.4.</span> <span class="toc-text">构造方法引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#比较器应用"><span class="toc-number">2.5.</span> <span class="toc-text">比较器应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Optional类"><span class="toc-number">3.</span> <span class="toc-text">Optional类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#函数式数据处理-重要"><span class="toc-number">4.</span> <span class="toc-text">函数式数据处理&#x3D;&#x3D;[重要]&#x3D;&#x3D;</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#流的操作"><span class="toc-number">4.1.</span> <span class="toc-text">流的操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#中间操作（返回值全是Stream）"><span class="toc-number">4.2.</span> <span class="toc-text">中间操作（返回值全是Stream）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#终端操作"><span class="toc-number">4.3.</span> <span class="toc-text">终端操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#收集器"><span class="toc-number">4.4.</span> <span class="toc-text">收集器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#分组操作"><span class="toc-number">4.4.1.</span> <span class="toc-text">分组操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#结果转换"><span class="toc-number">4.4.2.</span> <span class="toc-text">结果转换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分区操作"><span class="toc-number">4.4.3.</span> <span class="toc-text">分区操作</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数值流"><span class="toc-number">4.5.</span> <span class="toc-text">数值流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#流的创建"><span class="toc-number">4.6.</span> <span class="toc-text">流的创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#流的并发"><span class="toc-number">4.7.</span> <span class="toc-text">流的并发</span></a></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://images.pexels.com/photos/3755760/pexels-photo-3755760.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940)"><div id="post-info"><div id="post-title"><div class="posttitle">Java8新特性</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 发表于 2020-02-20<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> 更新于 2020-03-07</time><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>阅读量:</span><span id="busuanzi_value_page_pv"></span><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon fa-fw" aria-hidden="true"></i><span>评论数:</span><a href="/2020/02/20/Java8%E6%96%B0%E7%89%B9%E6%80%A7/#post-comment"><span class="disqus-comment-count" data-disqus-url="http://yoursite.com/2020/02/20/Java8%E6%96%B0%E7%89%B9%E6%80%A7/"></span></a></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h2 id="Java8中的接口"><a href="#Java8中的接口" class="headerlink" title="Java8中的接口"></a>Java8中的接口</h2><p>接口有默认实现，子类不实现default的方法，子类的实例也可以调用默认实现的方法</p>
<p>详见笔记</p>
<p>jdk8</p>
<p>允许把静态方法直接放进接口，静态方法不是抽象的，可以有实现</p>
<p>​        通常把产生接口对象的一些静态方法放进接口，拿到接口对象很容易</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.function.Consumer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestInterface8</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Animal a = Animal.createDog();</span><br><span class="line">		</span><br><span class="line">		Comparator&lt;String&gt; c1 = Comparator.naturalOrder();</span><br><span class="line">		Comparator&lt;String&gt; c2 = c1.reversed();</span><br><span class="line">		</span><br><span class="line">		List&lt;String&gt; list = Arrays.asList(<span class="string">"Liucy"</span>,<span class="string">"Huxz"</span>,<span class="string">"Liangb"</span>,<span class="string">"Suns"</span>);</span><br><span class="line">		list.sort(c2);</span><br><span class="line">		list.forEach(<span class="keyword">new</span> Consumer&lt;String&gt;()&#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span></span>&#123;</span><br><span class="line">				System.out.println(s);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		</span><br><span class="line">		Impl i= <span class="keyword">new</span> Impl();</span><br><span class="line">		i.m2();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">static</span> Animal <span class="title">createDog</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">implements</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">				System.out.println(<span class="string">"Dog eat"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> Dog();<span class="comment">//调用接口静态方法可以直接拿到Dog对象</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">static</span> Animal <span class="title">createCat</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">implements</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">				System.out.println(<span class="string">"Cat eat"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> Cat();		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IA</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">m1</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">m2</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"A m2"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IB</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">m2</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"B m2"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Impl</span> <span class="keyword">implements</span> <span class="title">IA</span> , <span class="title">IB</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m1</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m2</span><span class="params">()</span></span>&#123;</span><br><span class="line">		IA.<span class="keyword">super</span>.m2();</span><br><span class="line">		IB.<span class="keyword">super</span>.m2();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h2 id="Lambda表达式"><a href="#Lambda表达式" class="headerlink" title="Lambda表达式"></a>Lambda表达式</h2><blockquote>
<p>Lambda表达式：实现接口，并创建对象</p>
<p>​        可以理解为匿名内部类的简化写法，把可变性用最简单的逻辑表现出来</p>
</blockquote>
<p><a href="https://raw.githubusercontent.com/j8130/picBed/master/img/1563627464024.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/j8130/picBed/master/img/1563627464024.png" class="lazyload" title></a></p>
<p>概念引入案例</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jiasy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestLambda</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Student&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"liucy"</span>,<span class="number">30</span>,<span class="number">60.0</span>,<span class="string">"C1"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"liangb"</span>,<span class="number">28</span>,<span class="number">100</span>,<span class="string">"C2"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"Suns"</span>,<span class="number">15</span>,<span class="number">90.0</span>,<span class="string">"C1"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"Huxz"</span>,<span class="number">20</span>,<span class="number">40.0</span>,<span class="string">"C2"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"Wangyx"</span>,<span class="number">19</span>,<span class="number">60.0</span>,<span class="string">"C2"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"Yangdd"</span>,<span class="number">40</span>,<span class="number">70.0</span>,<span class="string">"C2"</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">        //调用函数  匿名内部类传条件</span></span><br><span class="line"><span class="comment">        List&lt;Student&gt; result1 = filterStudents(list, new Filter() &#123;</span></span><br><span class="line"><span class="comment">            <span class="doctag">@Override</span></span></span><br><span class="line"><span class="comment">            public boolean test(Student s) &#123;</span></span><br><span class="line"><span class="comment">                if (s.getAge()&lt;30) return true;</span></span><br><span class="line"><span class="comment">                else return false;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;);</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Filter的进化过程</span></span><br><span class="line">        Filter f1 = <span class="keyword">new</span> Filter() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">test</span><span class="params">(Student s)</span> </span>&#123; <span class="keyword">return</span> s.getAge()&lt;<span class="number">30</span>; &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Filter f2 = (Student s) -&gt;&#123;<span class="keyword">return</span> s.getAge()&lt;<span class="number">30</span>;&#125;;</span><br><span class="line">        Filter f3 = (Student s) -&gt; s.getAge()&lt;<span class="number">30</span>;</span><br><span class="line">        Filter f4 = (s) -&gt; s.getAge()&lt;<span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">        List&lt;Student&gt; result1 = filterStudents(list,(s)-&gt;s.getAge()&lt;<span class="number">30</span>);</span><br><span class="line">        List&lt;Student&gt; result2 = filterStudents(list,(s)-&gt;s.getScore()&lt;<span class="number">60</span> &amp;&amp; s.getClassNumber().equals(<span class="string">"C1"</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (Student student : result1) &#123;</span><br><span class="line">            System.out.println(student);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//函数作用，筛选学生，变化的是筛选条件</span></span><br><span class="line">    <span class="comment">//传参数时传一个学生集合，和一个筛选条件</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> List&lt;Student&gt; <span class="title">filterStudents</span><span class="params">(List&lt;Student&gt; list,Filter filter)</span></span>&#123;</span><br><span class="line">        List&lt;Student&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Student s : list)&#123;</span><br><span class="line">            <span class="keyword">if</span> (filter.test(s)) result.add(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义一个接口Filter，只有一个方法，参数是学生对象，学生是想要的返回true，否则false</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Filter</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">test</span><span class="params">(Student s)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">double</span> score;</span><br><span class="line">    String classNumber;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>实际使用案例</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jiasy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.function.Consumer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestLambda</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//案例1     线程</span></span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">"hello"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Runnable r = ()-&gt; System.out.println("hello");</span></span><br><span class="line"><span class="comment">         * Thread t2 = new Thread(r);</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Thread 里面传的是Runnable接口，所以Runnable接口不用写</span></span><br><span class="line"><span class="comment">         * 只有run方法，run方法不用写</span></span><br><span class="line"><span class="comment">         * run无参，小括号不用写</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//  t2  与  t1  等价</span></span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(()-&gt; System.out.println(<span class="string">"hello"</span>));</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//案例2       遍历</span></span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(<span class="string">"A"</span>,<span class="string">"BB"</span>,<span class="string">"CCC"</span>);</span><br><span class="line">        list.forEach(<span class="keyword">new</span> Consumer&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">                System.out.println(s);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        list.forEach((s) -&gt; System.out.println(s));</span><br><span class="line">        <span class="comment">//案例3   比较器  (按字符串长度排序)</span></span><br><span class="line"></span><br><span class="line">        list.sort((s1,s2)-&gt;s1.length()-s2.length());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//展开</span></span><br><span class="line">        list.sort(<span class="keyword">new</span> Comparator&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(String s1, String s2)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> s1.length()-s2.length();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="Lambda与泛型"><a href="#Lambda与泛型" class="headerlink" title="Lambda与泛型"></a>Lambda与泛型</h3><p>行为参数化</p>
<blockquote>
<p>利用接口，抽出可变性</p>
<p>利用匿名内部类，实现可变性</p>
<p>将行为逻辑作为参数</p>
</blockquote>
<p>函数式接口</p>
<blockquote>
<p>Lambda实现的接口只有一个方法。（只有函数式接口可以和Lambda表达式配合使用）</p>
<p>​        ==凡是只有一个抽象方法的接口叫函数式接口==</p>
<p>接口名字其实不重要，唯一的方法名字也不重要</p>
<p>重要：参数是什么类型，返回值是什么类型</p>
<p>所以对于函数式接口，可以定义一个函数的描述符，那么Lambda表达式要对应函数的描述符</p>
<p>函数描述符通常带有泛型</p>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java8有一个标注，专门用来描述函数式接口</span><br><span class="line"></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Filter</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">test</span><span class="params">(Student s)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//()-&gt;void</span></span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">"hello"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//T-&gt;void		String实际上是泛型，T是Consumer的泛型</span></span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(<span class="string">"A"</span>,<span class="string">"BB"</span>,<span class="string">"CCC"</span>);</span><br><span class="line">        list.forEach(<span class="keyword">new</span> Consumer&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">                System.out.println(s);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//(T,T)-&gt;int</span></span><br><span class="line">        list.sort(<span class="keyword">new</span> Comparator&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(String s1, String s2)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> s1.length()-s2.length();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure></div>





<p>案例做成泛型方法，优化</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jiasy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">testCoreJava</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Student&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"liucy"</span>,<span class="number">30</span>,<span class="number">60.0</span>,<span class="string">"C1"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"liangb"</span>,<span class="number">28</span>,<span class="number">100</span>,<span class="string">"C2"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"Suns"</span>,<span class="number">15</span>,<span class="number">90.0</span>,<span class="string">"C1"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"Huxz"</span>,<span class="number">20</span>,<span class="number">40.0</span>,<span class="string">"C2"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"Wangyx"</span>,<span class="number">19</span>,<span class="number">60.0</span>,<span class="string">"C2"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"Yangdd"</span>,<span class="number">40</span>,<span class="number">70.0</span>,<span class="string">"C2"</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Filter的进化过程</span></span><br><span class="line">        <span class="comment">//声明时加泛型  不加泛型就出错，因为指望编译器来做类型推断</span></span><br><span class="line">        Filter&lt;Student&gt; f1 = <span class="keyword">new</span> Filter&lt;Student&gt;() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">test</span><span class="params">(Student s)</span> </span>&#123; <span class="keyword">return</span> s.getAge()&lt;<span class="number">30</span>; &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Filter&lt;Student&gt; f2 = (Student s) -&gt;&#123;<span class="keyword">return</span> s.getAge()&lt;<span class="number">30</span>;&#125;;</span><br><span class="line">        Filter&lt;Student&gt; f3 = (Student s) -&gt; s.getAge()&lt;<span class="number">30</span>;</span><br><span class="line">        Filter&lt;Student&gt; f4 = (s) -&gt; s.getAge()&lt;<span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">        List&lt;Student&gt; result1 = filterObjects(list,(s)-&gt;s.getAge()&lt;<span class="number">30</span>);</span><br><span class="line">        List&lt;Student&gt; result2 = filterObjects(list,(s)-&gt;s.getScore()&lt;<span class="number">60</span> &amp;&amp; s.getClassNumber().equals(<span class="string">"C1"</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Student student : result1) &#123;</span><br><span class="line">            System.out.println(student);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//案例  挑出集合所有偶数</span></span><br><span class="line">        List&lt;Integer&gt; ls = Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>);</span><br><span class="line">        List&lt;Integer&gt; rs = filterObjects(ls, (i)-&gt;i%<span class="number">2</span>==<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (Integer r : rs) &#123;</span><br><span class="line">            System.out.println(r);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//函数作用，筛选学生，变化的是筛选条件</span></span><br><span class="line">    <span class="comment">//传参数时传一个学生集合，和一个筛选条件</span></span><br><span class="line">    <span class="keyword">static</span> &lt;T&gt; <span class="function">List&lt;T&gt; <span class="title">filterObjects</span><span class="params">(List&lt;T&gt; list,Filter&lt;T&gt; filter)</span></span>&#123;</span><br><span class="line">        List&lt;T&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (T s : list)&#123;</span><br><span class="line">            <span class="keyword">if</span> (filter.test(s)) result.add(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义一个接口Filter，只有一个方法，参数是学生对象，学生是想要的返回true，否则false</span></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Filter</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">test</span><span class="params">(T s)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">double</span> score;</span><br><span class="line">    String classNumber;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="函数式接口"><a href="#函数式接口" class="headerlink" title="函数式接口"></a>函数式接口</h3><p>jdk8定义了很多函数式接口，放在    java.util.function    包里</p>
<p>java.util.function    没有类，全是函数式接口</p>
<p>可以把案例的Filter全改成Predicate</p>
<blockquote>
<p>接口名字不重要，接口中方法的名字也不重要，所以才定义了一堆函数式接口，省得定义接口</p>
</blockquote>
<blockquote>
<p>Predicate    ：谓词（条件，用来执行判断）</p>
<p>Consumer    ： 消费（给一个对象，对它做点什么，做完继续消费下一个）     如遍历集合</p>
<p>Function    ：函数（指数学函数，有输入有输出）        T    参数        R    返回值</p>
<p>Supplier    ：提供者        T        返回值</p>
<p>​                        如Collable接口</p>
</blockquote>
<p>主要的4个</p>
<table>
<thead>
<tr>
<th align="center">接口</th>
<th align="center">函数描述符</th>
<th align="center">方法名</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Predicate<t></t></td>
<td align="center">T-&gt;boolean</td>
<td align="center">test</td>
</tr>
<tr>
<td align="center">Consumer<t></t></td>
<td align="center">T-&gt;void</td>
<td align="center">accept</td>
</tr>
<tr>
<td align="center">Function&lt;T,R&gt;</td>
<td align="center">T-&gt;R</td>
<td align="center">apply</td>
</tr>
<tr>
<td align="center">Supplier<t></t></td>
<td align="center">()-&gt;T</td>
<td align="center">get</td>
</tr>
</tbody></table>
<p>扩展</p>
<table>
<thead>
<tr>
<th align="left">接口</th>
<th align="left">函数描述符</th>
<th align="center">方法名</th>
</tr>
</thead>
<tbody><tr>
<td align="left">BiPredicate&lt;T,R&gt;  二元谓词</td>
<td align="left">(T,R)-&gt;boolean</td>
<td align="center">test</td>
</tr>
<tr>
<td align="left">BiConsumer&lt;T,R&gt;  二元消费者，遍历map</td>
<td align="left">(T,R)-&gt;void</td>
<td align="center">accept</td>
</tr>
<tr>
<td align="left">BiFunction&lt;T,U,R&gt;    二元函数，TU都是参数，R是返回值</td>
<td align="left">(T,U)-&gt;R</td>
<td align="center">apply</td>
</tr>
<tr>
<td align="left">UnaryOperator<t>   函数变种，接受T，返回T</t></td>
<td align="left">T-&gt;T</td>
<td align="center">apply</td>
</tr>
<tr>
<td align="left">BinaryOperator<t>   二元</t></td>
<td align="left">(T,T)-&gt;T</td>
<td align="center">apply</td>
</tr>
</tbody></table>
<blockquote>
<p>Integer是对象，会更多的占用堆空间，效率上不够经济</p>
</blockquote>
<ul>
<li>基本类型特化接口</li>
</ul>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">markdown</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">		Function  的一种特殊形式  |   为了节约自动封箱，自动拆箱的开销</span></span><br><span class="line"></span><br><span class="line">ToIntFunction<span class="xml"><span class="tag">&lt;<span class="name">T</span>&gt;</span></span>		T-&gt;int</span><br><span class="line"></span><br><span class="line">IntUnaryOperator		int-&gt;int</span><br><span class="line"></span><br><span class="line">IntToDouble			    int-&gt;double</span><br><span class="line">...</span><br></pre></td></tr></table></figure></div>



<h3 id="方法引用"><a href="#方法引用" class="headerlink" title="方法引用"></a>方法引用</h3><p>Lambda表达式的一种特殊写法</p>
<p>(S s1,Object s2)-&gt;s1.method(s2)         改写成    S::method</p>
<blockquote>
<ul>
<li>A是参数，B是参数        实现   第一个参数arg0调method，参数传rest</li>
<li>编译器会按照参数的顺序，要调用A的method，第一个参数是A对象，所以编译器知道是对arg0调method，剩一个参数当做调方法的参数</li>
<li>类名调静态方法，参数是args            括号里直接就是参数</li>
<li>对某一个对象（外部对象）调方法，参数是args        其他对象：：方法名</li>
</ul>
<p>前三个表达式都是调用了个方法，这三个表达式可以写成方法引用的形式       A  ::  方法名</p>
<p>编译器根据上下文把方法引用翻译成Lambda</p>
</blockquote>
<table>
<thead>
<tr>
<th>类型</th>
<th>Lambda</th>
<th align="left">方法引用</th>
</tr>
</thead>
<tbody><tr>
<td>参数方法</td>
<td>(A arg0, B rest)-&gt;arg0.method(rest)</td>
<td align="left">A  ::  method</td>
</tr>
<tr>
<td>静态方法</td>
<td>(args)-&gt;ClassName.method(args)</td>
<td align="left">ClassName  ::  method</td>
</tr>
<tr>
<td>其他对象方法</td>
<td>(args)-&gt;expr.method(args)</td>
<td align="left">expr  ::  method</td>
</tr>
<tr>
<td>构造方法</td>
<td>(args)-&gt;new Student()</td>
<td align="left">Student  ::  new</td>
</tr>
<tr>
<td>构造方法</td>
<td>(Student s)-&gt;new Student(s)</td>
<td align="left">Student::new</td>
</tr>
</tbody></table>
<p>代码</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jiasy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.function.Consumer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestLambda2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        I1 a1 = <span class="keyword">new</span> I1() &#123;</span><br><span class="line">            <span class="comment">//1.利用匿名内部类实现接口</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">(A a)</span> </span>&#123;</span><br><span class="line">                a.method();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">//Lambda表达式只是匿名内部类的一个写法，是个类，类完之后new对象</span></span><br><span class="line">        <span class="comment">//所以a1,a2 只是一个对象，执行  就是new了几个对象，啥都不会打印，  因为没调方法</span></span><br><span class="line">        <span class="comment">//a1,a2...  只是一个对象，若要打印，对a1调test，传个a对象才是调方法</span></span><br><span class="line">        a1.test(<span class="keyword">new</span> A());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.Lambda表达式版      只有一个参数，调用者用过了，所有调无参方法</span></span><br><span class="line">        I1 a2 = (A a)-&gt;a.method();</span><br><span class="line">        <span class="comment">//3.方法引用版</span></span><br><span class="line">        I1 a3 = A::method;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//二参</span></span><br><span class="line">        <span class="comment">//1.Lambda表达式版      两个参数，一个用在对象上，一个用在参数上</span></span><br><span class="line">        <span class="comment">//编译器还得知道method不是静态的，所以是对A对象调method   没懂这句</span></span><br><span class="line">        I2 a4 = (A a,String b)-&gt;a.method(b);</span><br><span class="line">        <span class="comment">//2.方法引用版</span></span><br><span class="line">        I2 a5 = A::method;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         //调method的无参，就不能用方法引用</span></span><br><span class="line"><span class="comment">         I2 a6 = (A a,String b)-&gt;a.method();</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//由接口管着调几个参数的方法</span></span><br><span class="line">        I3 a6 = (A a,String b,String c)-&gt;a.method(b,c);</span><br><span class="line">        I3 a7 = A::method;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Lambda表达式这样写是对的</span></span><br><span class="line">        I4 a8 = (String b,A a)-&gt;a.method(b);</span><br><span class="line">        <span class="comment">//方法引用是错的，因为method是非静态方法，要拿对象调，就会拿第一个当对象调，b不是A类对象，没method方法</span></span><br><span class="line">        <span class="comment">//编译器是按顺序推断的，并不会挑谁是对象</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//方法引用必须是拿第一个参数调方法，后面的按顺序都是参数</span></span><br><span class="line">        <span class="comment">//I4 a9 = A::method;  错</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//相当于调静态方法，parseInt是静态的，不需要拿对象调，拿类调就行，此时s就会被推断为参数</span></span><br><span class="line">        I5 a9 = s -&gt; Integer.parseInt(s);  <span class="comment">//String-&gt;int</span></span><br><span class="line">        <span class="comment">//可以改写成   静态方法没有对象，所以不会对A调，把参数都拿来当做方法的参数</span></span><br><span class="line">        I5 a10 = Integer::parseInt;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//I5参数是字符串，想打印字符串，对System.out对象 调 println方法</span></span><br><span class="line">        I5 a11 = s -&gt; System.out.println(s);</span><br><span class="line">        <span class="comment">//可以改写成         相当于打印s</span></span><br><span class="line">        I5 a12 = System.out::println;</span><br><span class="line"></span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(<span class="string">"abc"</span>,<span class="string">"def"</span>);</span><br><span class="line">        list.forEach(<span class="keyword">new</span> Consumer&lt;String&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">                System.out.println(s);<span class="comment">//真正的意图，遍历时打印元素</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//改写成</span></span><br><span class="line">        list.forEach(s-&gt; System.out.println(s));</span><br><span class="line">        <span class="comment">//遍历，要打印，这就是函数式编程，就是最本源还原程序员的意图</span></span><br><span class="line">        list.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">I1</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(A a)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">I2</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(A a, String b)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">I3</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(A a, String b,String c)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">I4</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(String b,A a)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">I5</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(String s)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"method()"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">(String s)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"method String"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">(String s1,String s2)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"method String String"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="构造方法引用"><a href="#构造方法引用" class="headerlink" title="构造方法引用"></a>构造方法引用</h3><p>案例</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jiasy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.function.BiFunction;</span><br><span class="line"><span class="keyword">import</span> java.util.function.Function;</span><br><span class="line"><span class="keyword">import</span> java.util.function.Supplier;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestLambda3</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/*W1 s1 = new W1() &#123;</span></span><br><span class="line"><span class="comment">            @Override</span></span><br><span class="line"><span class="comment">            public Worker method() &#123;</span></span><br><span class="line"><span class="comment">                return new Worker();</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        //Lambda表达式版   只保留参数表、代码</span></span><br><span class="line"><span class="comment">        W1 s2 = ()-&gt;new Worker();</span></span><br><span class="line"><span class="comment">        //改写  构造方法引用  特殊的方法引用</span></span><br><span class="line"><span class="comment">        */</span><span class="comment">/**</span></span><br><span class="line"><span class="comment">         * W1中方法参数表是无参的，所以Lambda表达式版参数表也是无参的</span></span><br><span class="line"><span class="comment">         * 调用的就是无参构造</span></span><br><span class="line"><span class="comment">        * */</span><span class="comment">/*</span></span><br><span class="line"><span class="comment">        W1 s3 = Worker::new;</span></span><br><span class="line"><span class="comment">        s3.method();//调用无参构造方法</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        */</span><span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 因为类型是W2，W2 里面是字符串类型参数的方法</span></span><br><span class="line"><span class="comment">         * 所以new的就是调字符串参数</span></span><br><span class="line"><span class="comment">         * 把参数当做调用构造方法时传的参数</span></span><br><span class="line"><span class="comment">         * */</span><span class="comment">/*</span></span><br><span class="line"><span class="comment">        W2 s4 = (s)-&gt;new Worker(s);</span></span><br><span class="line"><span class="comment">        W2 s5 = Worker::new;</span></span><br><span class="line"><span class="comment">        s5.method("ABC");       //Worker String</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        //s7引用的是双参数的构造方法，因为W3里边是两个参数，</span></span><br><span class="line"><span class="comment">        // 把两个参数都当成构造方法的参数</span></span><br><span class="line"><span class="comment">        W3 s6 = (s,a)-&gt;new Worker(s,a);</span></span><br><span class="line"><span class="comment">        W3 s7 = Worker::new;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        W1 W2 W3 都是()-&gt;T ,*/</span></span><br><span class="line">        <span class="comment">//可以用Supplier  ()-&gt;T   无参</span></span><br><span class="line">        Supplier&lt;Worker&gt; s1 = Worker::<span class="keyword">new</span>;</span><br><span class="line">        Worker worker1 = s1.get();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Function   T-&gt;R       单参</span></span><br><span class="line">        Function&lt;String,Worker&gt; s2 = Worker::<span class="keyword">new</span>;</span><br><span class="line">        Worker worker2 = s2.apply(<span class="string">"ABC"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//BiFunction   T,U -&gt; R     双参</span></span><br><span class="line">        BiFunction&lt;String,Integer,Worker&gt; s3 = Worker::<span class="keyword">new</span>;</span><br><span class="line">        Worker worker3 = s3.apply(<span class="string">"XYZ"</span>, <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//多参数就要自己写接口了</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">W1</span></span>&#123;</span><br><span class="line">    <span class="function">Worker <span class="title">method</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">W2</span></span>&#123;</span><br><span class="line">    <span class="function">Worker <span class="title">method</span><span class="params">(String s)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">W3</span></span>&#123;</span><br><span class="line">    <span class="function">Worker <span class="title">method</span><span class="params">(String s,<span class="keyword">int</span> a)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Worker</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Worker</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Worker()"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Worker</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Worker String"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Worker</span><span class="params">(String s,<span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Worker String  int"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="比较器应用"><a href="#比较器应用" class="headerlink" title="比较器应用"></a>比较器应用</h3><blockquote>
<p>Comparator为了让更方便的使用方法引用，提供了一些静态方法</p>
</blockquote>
<p>案例</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jiasy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.function.ToIntFunction;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestComparator</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Employee&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"liucy"</span>,<span class="number">30</span>,<span class="number">5000</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"liangb"</span>,<span class="number">28</span>,<span class="number">3000</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"Suns"</span>,<span class="number">35</span>,<span class="number">3000</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"Huxz"</span>,<span class="number">18</span>,<span class="number">1E6</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"Ydd"</span>,<span class="number">25</span>,<span class="number">7000</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//对年龄排序</span></span><br><span class="line">        list.sort((e1,e2)-&gt;e1.getAge()-e2.getAge());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//list.forEach(System.out::println);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 比较器接口中有一个静态方法comparingInt，返回值是比较器，</span></span><br><span class="line"><span class="comment">         * 参数是ToIntFunction&lt;&gt;   T-&gt;int</span></span><br><span class="line"><span class="comment">         * 作用：把要比较的对象编程一个整数，而给比较器就是让按照整数排序</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line">        <span class="comment">//参数给雇员，返回他的年龄        从雇员-&gt;整数</span></span><br><span class="line">        <span class="comment">//c1比较器 会把每个雇员变成整数，然后拿整数排序</span></span><br><span class="line">        Comparator&lt;Employee&gt; c1 = Comparator.comparingInt(<span class="keyword">new</span> ToIntFunction&lt;Employee&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">applyAsInt</span><span class="params">(Employee e)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> e.getAge();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        Comparator&lt;Employee&gt; c2 = Comparator.comparingInt(e-&gt;e.getAge());</span><br><span class="line">        Comparator&lt;Employee&gt; c3 = Comparator.comparingInt(Employee::getAge);</span><br><span class="line"></span><br><span class="line">        list.sort(c3);<span class="comment">//按年龄排序  可以c1，c2，c3</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//薪资从低到高排序      不用研究接口和方法是啥，匿名内部类才需要研究</span></span><br><span class="line">        <span class="comment">//.reversed()倒序</span></span><br><span class="line">        list.sort(Comparator.comparingDouble(Employee::getSalary).reversed());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//按姓名排序   代码一样，我的没出来</span></span><br><span class="line">        list.sort(Comparator.comparing(Employee::getName));</span><br><span class="line">        <span class="comment">//==============================================</span></span><br><span class="line">        <span class="comment">//先按照薪水，在按照年龄</span></span><br><span class="line">        <span class="comment">//第一个比较器  比薪水</span></span><br><span class="line">        Comparator&lt;Employee&gt; c4 = Comparator.comparingDouble(Employee::getSalary);</span><br><span class="line">        <span class="comment">//第二个比较器      比年龄</span></span><br><span class="line">        Comparator&lt;Employee&gt; c5 = Comparator.comparingInt(Employee::getAge);</span><br><span class="line">        <span class="comment">//比较器中方法thenComparing() 返回一个复合的比较器     接着比什么</span></span><br><span class="line">        list.sort(c4.thenComparing(c5));</span><br><span class="line"></span><br><span class="line">        list.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">double</span> salary;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//方法在程序员眼里是一等公民了，本质上还是在类里</span></span><br></pre></td></tr></table></figure></div>



<h2 id="Optional类"><a href="#Optional类" class="headerlink" title="Optional类"></a>Optional类</h2><blockquote>
<ul>
<li><p>用来解决空指针异常，Java中出现频率最高的异常</p>
<p>​        给值外面又包了一层，Optional对象里面可能是有对象，可能是null，里面是null，但总体来说还是个对象，从而避免空指针的发生</p>
</li>
<li><p>创建Optional        都是静态方法</p>
<ul>
<li>empty()        创建空值</li>
<li>of(T   value)     创建非空值            T不允许是null</li>
<li>ofNullable（T  value）   创建Optional对象，允许null值</li>
</ul>
</li>
<li><p>访问Optional</p>
<ul>
<li>isPresent（）：判断值是否存在 </li>
<li>get（）  获取值，空值抛异常</li>
<li>orElse（T  value）   获取值，如果无值则取默认值（T  value    参数的值）</li>
<li>ifPresent（Consumer<t> con）   如果值存在则消费值</t></li>
</ul>
</li>
</ul>
</blockquote>
<blockquote>
<p>Optional类是用来包装一个值，值可能是个正常对象，可能是个空指针，这样方法返回值类型就是通用的、、不懂</p>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Man</span></span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    Woman wife;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Woman <span class="title">getWife</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">用Optional类 有媳妇把Women装进去，没媳妇把空值装进去，返回值起码是Optional对象，不会是<span class="keyword">null</span></span><br><span class="line"></span><br><span class="line">在做类设计时   用Option作为wife的类型   因为可能没媳妇</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Man</span></span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    Optional&lt;Woman&gt; wife = Optional.empty();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Optional&lt;Woman&gt; <span class="title">getWife</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> wife;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>案例</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jiasy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestOptional</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">/*Man m =XXX;</span></span><br><span class="line"><span class="comment">        //m  m.wife  都有可能空指针</span></span><br><span class="line"><span class="comment">        if (m!=null &amp;&amp; m.wife!=null) m.wife.method();//以前解决思路*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        Optional&lt;String&gt; o1 = Optional.ofNullable("ABC");//o1里包装ABC</span></span><br><span class="line"><span class="comment">        Optional&lt;String&gt; o2 = Optional.ofNullable(null);//o2里包装null</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        //o1，o2都不是null   都是实实在在的对象</span></span><br><span class="line"><span class="comment">        //调isPresent()方法看是否存在</span></span><br><span class="line"><span class="comment">        System.out.println(o1.isPresent());//true</span></span><br><span class="line"><span class="comment">        System.out.println(o2.isPresent());//false</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        //通过get方法获取值</span></span><br><span class="line"><span class="comment">        String s1 = o1.get();</span></span><br><span class="line"><span class="comment">        System.out.println(s1);</span></span><br><span class="line"><span class="comment">        //String s2 = o2.get();  //出异常</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        //orElse（T  value）</span></span><br><span class="line"><span class="comment">        System.out.println(o1.orElse("hello"));//ABC</span></span><br><span class="line"><span class="comment">        System.out.println(o2.orElse("hello"));//hello</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        //ifPresent  获取值并消费掉</span></span><br><span class="line"><span class="comment">        //括号里传个consumer    T-&gt;void      函数式接口的第二个</span></span><br><span class="line"><span class="comment">        //t是o1里包的值，把值取出来消费掉</span></span><br><span class="line"><span class="comment">        //o1.ifPresent(t-&gt; System.out.println(t));</span></span><br><span class="line"><span class="comment">        //简便写法</span></span><br><span class="line"><span class="comment">        o1.ifPresent(System.out::println);//ABC</span></span><br><span class="line"><span class="comment">        o2.ifPresent(System.out::println);//啥也没打印   如果存在才消费  没异常</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        Man man = <span class="keyword">new</span> Man();</span><br><span class="line">        <span class="comment">//man.wife 肯定有值</span></span><br><span class="line">        <span class="comment">//如果wife里的值不是空的，有媳妇，对媳妇调method</span></span><br><span class="line">        <span class="comment">//如果wife里的值是空的，没媳妇，不调method</span></span><br><span class="line">        man.wife.ifPresent(t-&gt;t.method());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//简便写法   使用方法引用对t调方法</span></span><br><span class="line">        man.wife.ifPresent(Woman::method);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Man</span></span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    Optional&lt;Woman&gt; wife = Optional.empty();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Optional&lt;Woman&gt; <span class="title">getWife</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> wife;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Woman</span></span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="函数式数据处理-重要"><a href="#函数式数据处理-重要" class="headerlink" title="函数式数据处理==[重要]=="></a>函数式数据处理==[重要]==</h2><blockquote>
<p>java中数据存储位置：数组、集合</p>
<p>外部处理数据，不如内部处理数据效率高</p>
<p>函数式数据处理：在集合中处理数据</p>
</blockquote>
<p>Stream编程框架（与IO流没关系）</p>
<p>def：流可以理解为用来处理集合中数据的高级的迭代器，会把集合里的数据都装在流里，对流做数据处理，就是对集合中数据做数据处理（配合集合或数组使用，用来处理数据）</p>
<p>流与集合区别：流是用来处理数据的，集合更偏重与数据的存储，流更偏重与数据的计算</p>
<blockquote>
<p>Stream用于处理集合中的数据</p>
<p>集合：面向数据存储（类似于用DVD看电影，电影都放在DVD上）</p>
<p>流：面向数据计算（类似于用在线流媒体看电影，流中未必存储了所有数据，但正在运算的数据一定有）</p>
<p>数据操作 </p>
<ul>
<li><p>流：内部迭代 </p>
</li>
<li><p>集合：外部迭代</p>
</li>
</ul>
<p>提高并发效率，简化编程</p>
</blockquote>
<p>流的独特之处：</p>
<blockquote>
<p>创建一个集合，装着所有的整数。无限流</p>
<p>数组、集合是有限的，流是无限的</p>
<p>操作集合，数组的流是有限的</p>
<p>存在无限流</p>
<p>==注意==：与迭代器有一个共同特点，只能被消费一次</p>
<p>​            迭代器遍历，只能遍历一次</p>
</blockquote>
<h3 id="流的操作"><a href="#流的操作" class="headerlink" title="流的操作"></a>流的操作</h3><p>位置</p>
<blockquote>
<p>java.util.stream </p>
<p>Interface Stream<t></t></p>
</blockquote>
<blockquote>
<p>数据源：大部分情况下是集合</p>
<ul>
<li>分为中间操作和终端操作<ul>
<li>中间操作：每个中间操作的返回值都是一个新的流，如对流调了个排序方法，排序的返回值又是一个流，对返回值流可以再调一个方法</li>
<li>终端操作：最后一步，返回的是运算结果</li>
</ul>
</li>
</ul>
<p>==注意==：当对流调sort时，并不是真正执行此操作，只是构建好流水线（先不执行），真正执行整个操作的是最后的终端操作</p>
<ul>
<li>好处：省去了很多重复的工作，如排序并找出最大的，只需一次就能遍历就能找到</li>
</ul>
</blockquote>
<p><a href="https://raw.githubusercontent.com/j8130/picBed/master/img/1563703597762.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/j8130/picBed/master/img/1563703597762.png" class="lazyload" title></a></p>
<p>collection接口 有一个Stream方法  变成一个流，流的类型是Stream，泛型是集合元素类型</p>
<h3 id="中间操作（返回值全是Stream）"><a href="#中间操作（返回值全是Stream）" class="headerlink" title="中间操作（返回值全是Stream）"></a>中间操作（返回值全是Stream）</h3><p>对流调一个方法，返回还是一个流</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>返回值</th>
<th>参数类型</th>
<th>参数方法描述</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>filter</td>
<td>Stream<t></t></td>
<td>Predicate   谓词</td>
<td>T-&gt;boolean</td>
<td>筛选元素</td>
</tr>
<tr>
<td>distinct</td>
<td>Stream<t></t></td>
<td>无参</td>
<td></td>
<td>过滤重复元素</td>
</tr>
<tr>
<td>limit</td>
<td>Stream<t></t></td>
<td>long</td>
<td></td>
<td>截短流</td>
</tr>
<tr>
<td>map</td>
<td>Stream<r></r></td>
<td>Function</td>
<td>T-&gt;R</td>
<td>映射流</td>
</tr>
<tr>
<td>flatMap</td>
<td>Stream<r></r></td>
<td>Function</td>
<td>T-&gt;Stream<r></r></td>
<td>扁平化（展开）</td>
</tr>
<tr>
<td>sorted</td>
<td>Stream<r></r></td>
<td>Comparator</td>
<td>（T，T）-&gt;int</td>
<td>排序</td>
</tr>
</tbody></table>
<p>skip：与limit相反        skip（5）-&gt;跳过流里前5</p>
<p>​                                        limit（5）-&gt;获取流里前5</p>
<p>map：学生映射成学生的名字        给一个存满了T对象的Stream，返回一个存满了R对象的Stream</p>
<p>flatMap：把一个对象先转成一个以R为泛型的流，好多对象转成好多R为泛型的流，再把这些流里的数据汇总到一个流里，将一个record展开0-n个record</p>
<p>案例  filter |  distinct</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jiasy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStream1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(<span class="string">"Liucy"</span>,<span class="string">"Suns"</span>,<span class="string">"Huxz"</span>,<span class="string">"Liangb"</span>,<span class="string">"Huxz"</span>,<span class="string">"Suns"</span>);</span><br><span class="line">        <span class="comment">//把集合所有元素放入流里</span></span><br><span class="line">        Stream&lt;String&gt; stream = list.stream();<span class="comment">//collection接口 有一个Stream方法</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 理解为高级迭代器</span></span><br><span class="line"><span class="comment">         * Iterator&lt;String&gt; it = list.iterator();</span></span><br><span class="line"><span class="comment">         * */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*=================================</span></span><br><span class="line"><span class="comment">        //只想知道集合前3个元素</span></span><br><span class="line"><span class="comment">        Stream&lt;String&gt; stream2 = stream.limit(3);*/</span></span><br><span class="line">============================</span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">        *  //所有长度为4的元素且不能重复</span></span><br><span class="line"><span class="comment">        Stream&lt;String&gt; stream2 = stream.filter(s -&gt; s.length() == 4);//筛选长度为4</span></span><br><span class="line"><span class="comment">        Stream&lt;String&gt; stream3 = stream2.distinct();//筛掉重复</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        //终端操作      Stream-&gt;集合</span></span><br><span class="line"><span class="comment">        //collect是一个标准的终端操作，括号里是一个收集器</span></span><br><span class="line"><span class="comment">        List&lt;String&gt; result = stream3.collect(Collectors.toList());*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//所有长度为4的元素且不能重复，合在一起</span></span><br><span class="line">        List&lt;String&gt; result = list.stream().filter(s -&gt; s.length()==<span class="number">4</span>).distinct().collect(Collectors.toList());</span><br><span class="line">        <span class="comment">//遍历</span></span><br><span class="line">        result.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>案例 map</p>
<p>把一个对象转成另外一个对象，放入流里</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jiasy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStream2_map</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Student&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"Liucy"</span>,<span class="number">30</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"Liangb"</span>,<span class="number">25</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"Huxz"</span>,<span class="number">18</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"Suns"</span>,<span class="number">20</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"Zouxf"</span>,<span class="number">30</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//需求：打印所有年龄在23以下学生名字</span></span><br><span class="line"></span><br><span class="line">        Stream&lt;Student&gt; stream = list.stream();</span><br><span class="line">        Stream&lt;Student&gt; stream1 = stream.filter(s -&gt; s.getAge() &lt; <span class="number">23</span>);</span><br><span class="line">        <span class="comment">//表示把流从一种泛型映射为另一种泛型   流1里装的都是学生，希望流2里装的都是学生名字</span></span><br><span class="line">        <span class="comment">//stream1.map(new Function&lt;Student, String&gt;() &#123;</span></span><br><span class="line">        <span class="comment">//    @Override</span></span><br><span class="line">        <span class="comment">//    public String apply(Student s) &#123;</span></span><br><span class="line">        <span class="comment">//        return s.getName();</span></span><br><span class="line">        <span class="comment">//    &#125;</span></span><br><span class="line">        <span class="comment">//&#125;);</span></span><br><span class="line">        <span class="comment">//stream1.map(s-&gt;s.getName());</span></span><br><span class="line">        Stream&lt;String&gt; stream2 = stream1.map(Student::getName);</span><br><span class="line">        List&lt;String&gt; result = stream2.collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">        result.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//for (Student s : result) &#123;</span></span><br><span class="line">        <span class="comment">//    System.out.println(s.getName());</span></span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>案例   排序</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">基于上一个案例改</span><br><span class="line">Stream&lt;String&gt; stream2 = stream1.map(Student::getName);</span><br><span class="line">        <span class="comment">//按长度排序</span></span><br><span class="line">        Stream&lt;String&gt; stream3 = stream2.sorted(Comparator.comparingInt(String::length));</span><br><span class="line">        List&lt;String&gt; result = stream3.collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">        result.forEach(System.out::println);</span><br></pre></td></tr></table></figure></div>



<p>案例  flatMap   难</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jiasy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStream3_flatMap</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(<span class="string">"ABC"</span>, <span class="string">"XYZ"</span>, <span class="string">"DEG"</span>, <span class="string">"YUH"</span>);</span><br><span class="line">        <span class="comment">//这个集合有哪些字母组成</span></span><br><span class="line">        <span class="comment">//flatMap  流的扁平化    T-&gt;Stream&lt;R&gt;  T变成以R为泛型的Stream，把Stream合成一个大的Stream</span></span><br><span class="line">        Stream&lt;String&gt; stream1 = list.stream().flatMap((String s)-&gt;&#123;</span><br><span class="line">           String[] ss =  s.split(<span class="string">""</span>);<span class="comment">//先变成一个字符数组</span></span><br><span class="line">            Stream&lt;String&gt; result = Arrays.stream(ss);<span class="comment">//把数组变成流</span></span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//去重，转成集合，集合遍历</span></span><br><span class="line">        stream1.distinct().collect(Collectors.toList()).forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">==============分开写==============</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStream3_flatMap</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(<span class="string">"ABC"</span>, <span class="string">"XYZ"</span>, <span class="string">"DEG"</span>, <span class="string">"YUH"</span>);</span><br><span class="line">        Stream&lt;String[]&gt; stream2 = list.stream().map(s -&gt; s.split(<span class="string">""</span>));</span><br><span class="line">        Stream&lt;String&gt; stream3 = stream2.flatMap(Arrays::stream);</span><br><span class="line">        Stream&lt;String&gt; stream4 = stream3.distinct();</span><br><span class="line">        List&lt;String&gt; result = stream4.collect(Collectors.toList());</span><br><span class="line">        result.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="终端操作"><a href="#终端操作" class="headerlink" title="终端操作"></a>终端操作</h3><p>把流变成最终想要的数据</p>
<p>中间操作执行时操作并没有真正发生，而是最终发生终端操作时，才真正处理流里面的数据。可以提供数据处理效率</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>返回值</th>
<th>参数类型</th>
<th>参数方法描述</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>anyMatch</td>
<td>boolean</td>
<td>Predicate</td>
<td>T-&gt;boolean</td>
<td>任意匹配</td>
</tr>
<tr>
<td>noneMatch</td>
<td>boolean</td>
<td>Predicate</td>
<td>T-&gt;boolean</td>
<td>全不匹配</td>
</tr>
<tr>
<td>allMatch</td>
<td>boolean</td>
<td>Predicate</td>
<td>T-&gt;boolean</td>
<td>全匹配</td>
</tr>
<tr>
<td>findAny</td>
<td>Optional<t></t></td>
<td>无参</td>
<td></td>
<td>查找任一元素</td>
</tr>
<tr>
<td>findFirst</td>
<td>Optional<t></t></td>
<td>无参</td>
<td></td>
<td>查找首元素</td>
</tr>
<tr>
<td>forEach</td>
<td>无返回值</td>
<td>Consumer</td>
<td>T-&gt;void</td>
<td>消费流</td>
</tr>
</tbody></table>
<blockquote>
<p>前3个参数都是谓词，条件</p>
<p>anyMatch       有一个匹配就true</p>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">markdown</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">count() 返回此流中的元素数。 </span><br><span class="line">Optional<span class="xml"><span class="tag">&lt;<span class="name">T</span>&gt;</span></span> max(Comparator<span class="xml"><span class="php"><span class="meta">&lt;?</span> super T&gt;</span></span> comparator) </span><br><span class="line">根据提供的 Comparator返回此流的最大元素。 </span><br><span class="line">Optional<span class="xml"><span class="tag">&lt;<span class="name">T</span>&gt;</span></span> min(Comparator<span class="xml"><span class="php"><span class="meta">&lt;?</span> super T&gt;</span></span> comparator) </span><br><span class="line">根据提供的 Comparator返回此流的最小元素。  </span><br><span class="line">Optional<span class="xml"><span class="tag">&lt;<span class="name">T</span>&gt;</span></span> findAny() 		找流里任意一个元素，随便拿一个</span><br><span class="line">返回描述流的一些元素的Optional如果流为空，则返回一个空的Optional 。 </span><br><span class="line">Optional<span class="xml"><span class="tag">&lt;<span class="name">T</span>&gt;</span></span> findFirst() 	找流里第一个元素</span><br><span class="line">返回描述此流的第一个元素的Optional如果流为空，则返回一个空的Optional 。</span><br></pre></td></tr></table></figure></div>



<p>数据准备</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jiasy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">double</span> salary;</span><br><span class="line">    String dept;<span class="comment">//部门</span></span><br><span class="line">    <span class="comment">//静态方法，方便   返回一个装满了雇员的集合</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Employee&gt; <span class="title">createEmployee</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Employee&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"胡彥斌"</span>,<span class="number">25</span>,<span class="number">30000</span>,<span class="string">"教学"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"刘第"</span>,<span class="number">40</span>,<span class="number">8000</span>,<span class="string">"教学"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"孙斌"</span>,<span class="number">35</span>,<span class="number">20000</span>,<span class="string">"研发"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"杨冬冬"</span>,<span class="number">20</span>,<span class="number">5000</span>,<span class="string">"教学"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"梁斌"</span>,<span class="number">27</span>,<span class="number">6500</span>,<span class="string">"教学管理"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"王宇熙"</span>,<span class="number">23</span>,<span class="number">9000</span>,<span class="string">"研发"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"马静"</span>,<span class="number">26</span>,<span class="number">10000</span>,<span class="string">"教学管理"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"陆小伟"</span>,<span class="number">18</span>,<span class="number">1100</span>,<span class="string">"教学"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"郑春光"</span>,<span class="number">21</span>,<span class="number">3000</span>,<span class="string">"教学"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"杨艳玲"</span>,<span class="number">32</span>,<span class="number">4000</span>,<span class="string">"教学"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"姚计科"</span>,<span class="number">39</span>,<span class="number">8216</span>,<span class="string">"渠道"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"张琦"</span>,<span class="number">51</span>,<span class="number">12000</span>,<span class="string">"渠道"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"陈美霞"</span>,<span class="number">29</span>,<span class="number">7800</span>,<span class="string">"渠道"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"韦科"</span>,<span class="number">16</span>,<span class="number">1000</span>,<span class="string">"渠道"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"岳浩"</span>,<span class="number">17</span>,<span class="number">1500</span>,<span class="string">"渠道"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"滕春龙"</span>,<span class="number">22</span>,<span class="number">9001</span>,<span class="string">"教学管理"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"毕龙龙"</span>,<span class="number">45</span>,<span class="number">4600</span>,<span class="string">"研发"</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"刘浩"</span>,<span class="number">12</span>,<span class="number">500</span>,<span class="string">"研发"</span>));</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>案例</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jiasy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStream_endOperation</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Employee&gt; list = Employee.createEmployee();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//统计数量</span></span><br><span class="line">        <span class="keyword">long</span> count = list.stream().count();<span class="comment">//返回值是长整数</span></span><br><span class="line">        System.out.println(count);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//默认返回Optional，因为流可能为空  Optional可以装对象，可以装空指针</span></span><br><span class="line">        <span class="comment">//不能用在并行场景</span></span><br><span class="line">        Optional&lt;Employee&gt; o1 = list.stream().findFirst();</span><br><span class="line">        System.out.println(o1.get());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//findAny()    方法是用在并行使用场景下的，如果让4个线程随便拿一个，拿的就是随机的</span></span><br><span class="line">        <span class="comment">//一个线程等同于findFirst()</span></span><br><span class="line">        Optional&lt;Employee&gt; o2 = list.stream().findAny();</span><br><span class="line">        System.out.println(o2.get());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//判断员工是否都大于18岁</span></span><br><span class="line">        <span class="comment">/*boolean b1 = list.stream().allMatch(new Predicate&lt;Employee&gt;() &#123;</span></span><br><span class="line"><span class="comment">            @Override</span></span><br><span class="line"><span class="comment">            public boolean test(Employee e) &#123;</span></span><br><span class="line"><span class="comment">                return e.getAge()&gt;18;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;);*/</span></span><br><span class="line">        <span class="keyword">boolean</span> b1 = list.stream().allMatch(e-&gt;e.getAge()&gt;<span class="number">18</span>);</span><br><span class="line">        <span class="keyword">boolean</span> b2 = list.stream().allMatch(e -&gt; e.getAge()&gt;<span class="number">18</span>);<span class="comment">//只要有一个大于18</span></span><br><span class="line">        <span class="keyword">boolean</span> b3 = list.stream().noneMatch(e -&gt; e.getAge()&lt;<span class="number">6</span>);<span class="comment">//是不是都不小于6   与allMatch相反</span></span><br><span class="line">        System.out.println(b3);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//流可以直接遍历，不用转为list</span></span><br><span class="line">        list.stream().forEach(System.out::println);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="收集器"><a href="#收集器" class="headerlink" title="收集器"></a>收集器</h3><p>对终端数据做收集操作（比较通用的终端操作）</p>
<blockquote>
<ul>
<li>R  collect（Collector  c）</li>
<li>Collector&lt;T,A,R&gt;              收集器接口<ul>
<li>T：元素类型              流中元素</li>
<li>A：中间类型</li>
<li>R：结果类型</li>
</ul>
</li>
<li>Collectors    ==工具类==    内置了若干的Collector     都是为了拿到一个收集器<ul>
<li><code>counting()</code>  统计流里元素个数</li>
</ul>
</li>
</ul>
</blockquote>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">markdown</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">R,A</span>&gt;</span></span> R collect(Collector<span class="xml"><span class="php"><span class="meta">&lt;?</span> super T,A,R&gt;</span></span> collector)   ----java.util.stream Interface Stream<span class="xml"><span class="php">&lt;T&gt;</span></span></span><br><span class="line">拿到的数据是由收集器里的第三个泛型所决定的</span><br><span class="line">用不同的收据器就可以拿到不同的数据，就可以对流做不同的收集操作</span><br></pre></td></tr></table></figure></div>

<p>Collectors      收集器</p>
<p> 返回值R类型 即第三个泛型</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>返回值R类型</th>
<th>参数类型</th>
<th>参数方法描述</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>toList</td>
<td>List<t></t></td>
<td>无参</td>
<td></td>
<td>转为List</td>
</tr>
<tr>
<td>toSet</td>
<td>Set<t></t></td>
<td>无参</td>
<td></td>
<td>转为Set</td>
</tr>
<tr>
<td>counting</td>
<td>Long</td>
<td>无参</td>
<td></td>
<td>统计元素个数</td>
</tr>
<tr>
<td>summingInt</td>
<td>Integer</td>
<td>ToIntFunction</td>
<td>T-&gt;int   把每个参数映射成一个int</td>
<td>对整数求和</td>
</tr>
<tr>
<td>averagingInt</td>
<td>Double</td>
<td>ToIntFunction</td>
<td>T-&gt;int</td>
<td>对整数求平均数</td>
</tr>
<tr>
<td>maxBy</td>
<td>Optional<t></t></td>
<td>Comparator</td>
<td>(T,T)-&gt;int</td>
<td>最大值</td>
</tr>
<tr>
<td>joining</td>
<td>String</td>
<td>无参</td>
<td></td>
<td>字符串拼接</td>
</tr>
</tbody></table>
<p>还可以</p>
<blockquote>
<p>对Long 、Double求平均数</p>
<p>minBy   最小值</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public static Collector&lt;CharSequence,?,String&gt; joining()返回一个 Collector ，将输入元素连接到一个 String ，按照顺序。 </span><br><span class="line">结果 </span><br><span class="line">一个 Collector ，将输入元素连接到一个 String中，按照顺序 </span><br><span class="line"></span><br><span class="line">joining对第一个参数泛型（流里元素的类型）也有要求，只能用作一个装满字符串的流，把流里的字符串拼成一个大字符串</span><br></pre></td></tr></table></figure></div>


</blockquote>
<p><a href="https://raw.githubusercontent.com/j8130/picBed/master/img/1563774306847.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/j8130/picBed/master/img/1563774306847.png" class="lazyload" title></a></p>
<p>案例</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jiasy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStream_collector</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Employee&gt; list = Employee.createEmployee();</span><br><span class="line"></span><br><span class="line">        Long l1 = list.stream().collect(Collectors.counting());</span><br><span class="line">        <span class="comment">//l2与l1一样，l2是l1 的特殊写法  都是统计个数</span></span><br><span class="line">        <span class="keyword">long</span> l2 = list.stream().count();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//toSet()</span></span><br><span class="line">        Set&lt;Employee&gt; set = list.stream().collect(Collectors.toSet());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//员工总的年龄</span></span><br><span class="line">        Integer result = list.stream().collect(Collectors.summingInt(Employee::getAge));</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="comment">//员工的平均年龄</span></span><br><span class="line">        Double result1 = list.stream().collect(Collectors.averagingInt(Employee::getAge));</span><br><span class="line">        <span class="comment">//员工平均工资</span></span><br><span class="line">        Double result2 = list.stream().collect(Collectors.averagingDouble(Employee::getSalary));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//年龄最小的员工       minBy里面传比较器</span></span><br><span class="line">        Employee e = list.stream().collect(Collectors.minBy(Comparator.comparingInt(Employee::getAge))).get();</span><br><span class="line">        <span class="comment">//简单写法</span></span><br><span class="line">        Employee e2 = list.stream().min(Comparator.comparingInt(Employee::getAge)).get();</span><br><span class="line"></span><br><span class="line">        System.out.println(e);</span><br><span class="line">        <span class="comment">//把所有员工名字拼在一起</span></span><br><span class="line">        Stream&lt;Employee&gt; stream1 = list.stream();</span><br><span class="line">        Stream&lt;String&gt; stream2 = stream1.map(Employee::getName);<span class="comment">//给员工变成名字</span></span><br><span class="line">        String total = stream2.collect(Collectors.joining(<span class="string">","</span>));</span><br><span class="line">        System.out.println(total);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="分组操作"><a href="#分组操作" class="headerlink" title="分组操作"></a>分组操作</h4><blockquote>
<ul>
<li>groupingBy（Function&lt;T，K&gt; f）<ul>
<li>把流里的元素，根据提取出的某个键自动分组，并把结果放入一个Map</li>
<li>groupingBy  的Function  的参数是T   返回值是K      K作为Map的key   以K分组</li>
</ul>
</li>
<li>返回值Collector&lt;T，？，Map&lt;K，List<t>&gt;&gt;</t></li>
<li>以转换函数的结果为key，将同组的元素放入List为值</li>
</ul>
<ul>
<li>多级分组/分组转换</li>
<li>groupingBy（Function&lt;T，K&gt; f，Collector&lt;T，？，D&gt; c）<ul>
<li>对分组的结果再做收集</li>
</ul>
</li>
<li>返回值Collector&lt;T，？，Map&lt;K，D&gt;&gt;</li>
<li>以转换函数的结果为key，值的类型由Collector  c  决定</li>
</ul>
</blockquote>
<p><a href="https://raw.githubusercontent.com/j8130/picBed/master/img/20200221001034.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/j8130/picBed/master/img/20200221001034.png" class="lazyload" title></a></p>
<h4 id="结果转换"><a href="#结果转换" class="headerlink" title="结果转换"></a>结果转换</h4><p><a href="https://raw.githubusercontent.com/j8130/picBed/master/img/20200221001148.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/j8130/picBed/master/img/20200221001148.png" class="lazyload" title></a></p>
<p>collectingAndThen—==先收集再转换==</p>
<p>​        对一个收集器可以再生成一个收集器</p>
<p>​        Collector用来收集数据</p>
<p>​        Function用来对收集到的数据做一个转换</p>
<p>mapping：—==先转换再收集==</p>
<p>​        先给个函数，把T（参数）转成U（返回值），</p>
<p>​        再给一个收集器U-&gt;R</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jiasy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.util.Comparator.comparingInt;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.util.stream.Collectors.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStream_group</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Employee&gt; list = Employee.createEmployee();</span><br><span class="line"><span class="comment">//      收集操作的参数传入一个groupingBy，传参给一个Employee，返回getDept</span></span><br><span class="line"><span class="comment">//        根据部门做分组</span></span><br><span class="line"><span class="comment">//		Map&lt;String, List&lt;Employee&gt;&gt; result = list.stream().collect(groupingBy(Employee::getDept));</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//		result.forEach((s,l)-&gt;&#123;     //s 是键  部门   l是值  集合</span></span><br><span class="line"><span class="comment">//			System.out.println(s);</span></span><br><span class="line"><span class="comment">//			l.forEach(System.out::println);</span></span><br><span class="line"><span class="comment">//		&#125;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//每个部门的平均工资</span></span><br><span class="line">        Map&lt;String,Double&gt; result = list.stream().collect(groupingBy(</span><br><span class="line">                Employee::getDept,  <span class="comment">//分组依据</span></span><br><span class="line">                <span class="comment">//这个收集器最终返回double，所以Map最终的值是double</span></span><br><span class="line">                averagingDouble(Employee::getSalary)<span class="comment">//对分组结果的List做对工资的求平均值</span></span><br><span class="line">        ));</span><br><span class="line">        result.forEach((s,d)-&gt;System.out.println(s+<span class="string">":"</span>+d));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//每个部门的年龄最大的员工</span></span><br><span class="line">        Map&lt;String,Employee&gt; result2 = list.stream().collect(groupingBy(</span><br><span class="line">                Employee::getDept,<span class="comment">//分组</span></span><br><span class="line">                collectingAndThen(<span class="comment">//收集List的收集器</span></span><br><span class="line">                        <span class="comment">//基于求最大值的收集器，求出的是Optional</span></span><br><span class="line">                        maxBy(comparingInt(Employee::getAge)),</span><br><span class="line">                        <span class="comment">//通过函数把Optional变成Optional里边的Employee</span></span><br><span class="line">                        Optional::get</span><br><span class="line">                )</span><br><span class="line">        ));</span><br><span class="line">        result2.forEach((s,o)-&gt;System.out.println(s+<span class="string">":"</span>+o));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//先转成小写，再用逗号连接起来</span></span><br><span class="line">        List&lt;String&gt; ss = Arrays.asList(<span class="string">"LIUCY"</span>,<span class="string">"HUXZ"</span>,<span class="string">"LINAGB"</span>);</span><br><span class="line">        String s = ss.stream().collect(mapping(</span><br><span class="line">                String::toLowerCase,<span class="comment">//转小写</span></span><br><span class="line">                joining(<span class="string">","</span>)<span class="comment">//收集器</span></span><br><span class="line">        ));</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="分区操作"><a href="#分区操作" class="headerlink" title="分区操作"></a>分区操作</h4><p>可以认为是特殊的分组操作</p>
<p><a href="https://raw.githubusercontent.com/j8130/picBed/master/img/20200221001254.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/j8130/picBed/master/img/20200221001254.png" class="lazyload" title></a></p>
<p>统计所有18岁以下员工的平均工资</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jiasy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.util.stream.Collectors.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStream_partition</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//计算18岁以下员工的平均工资</span></span><br><span class="line"></span><br><span class="line">        List&lt;Employee&gt; list = Employee.createEmployee();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//filter:过滤出来所有小于18岁的员工，collect：再对它做收集</span></span><br><span class="line">        <span class="keyword">double</span> result = list.stream().filter(s-&gt;s.getAge()&lt;<span class="number">18</span>).collect(averagingDouble(Employee::getSalary));</span><br><span class="line">        System.out.println(result);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//分区  能算18岁以下的平均工资  和  18岁以上的平均工资</span></span><br><span class="line">        Map&lt;Boolean,Double&gt; map = list.stream().collect(partitioningBy(</span><br><span class="line">                s-&gt;s.getAge()&lt;<span class="number">18</span>,</span><br><span class="line">                averagingDouble(Employee::getSalary)</span><br><span class="line">        ));</span><br><span class="line">        map.forEach((b,d)-&gt;System.out.println(b+<span class="string">":"</span>+d));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="数值流"><a href="#数值流" class="headerlink" title="数值流"></a>数值流</h3><p>基本类型的特化：由基本类型数据组成的一个流</p>
<p>想拿到所有员工的年龄所组成的一个流</p>
<p>IntStream：由int组成的流</p>
<p>同理有DoubleStream，LongStream</p>
<p><a href="https://raw.githubusercontent.com/j8130/picBed/master/img/1563892291111.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/j8130/picBed/master/img/1563892291111.png" class="lazyload" title></a></p>
<p>案例</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jiasy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.function.Predicate;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.DoubleStream;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.IntStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStream_intstream</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">		List&lt;Employee&gt; list = Employee.createEmployee();</span></span><br><span class="line"><span class="comment">		Stream&lt;Employee&gt; stream1 = list.stream();</span></span><br><span class="line"><span class="comment">		//Stream&lt;Integer&gt; stream2 = stream1.map(Employee::getAge);</span></span><br><span class="line"><span class="comment">        //所有员工的年龄所组成的一个流,并不会把每个人的年龄都封箱</span></span><br><span class="line"><span class="comment">		IntStream stream2 = stream1.mapToInt(Employee::getAge);</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建从1-99的数值流</span></span><br><span class="line">		IntStream is = IntStream.range(<span class="number">1</span>, <span class="number">100</span>);  <span class="comment">// 1-99        [1,100)</span></span><br><span class="line">		System.out.println(is.sum());</span><br><span class="line">		<span class="comment">//闭区间</span></span><br><span class="line">		IntStream is2 = IntStream.rangeClosed(<span class="number">1</span>, <span class="number">100</span>); <span class="comment">//1-100  [1,100]</span></span><br><span class="line">		System.out.println(is2.sum());</span><br><span class="line"></span><br><span class="line">		<span class="comment">//判断一个数是不是质数</span></span><br><span class="line">		Predicate&lt;Integer&gt; p1 = <span class="keyword">new</span> Predicate&lt;Integer&gt;()&#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">test</span><span class="params">(Integer n)</span></span>&#123;</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span> ; i &lt;= Math.sqrt(n);i++)&#123;</span><br><span class="line">					<span class="keyword">if</span> (n % i == <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="comment">//判断一个数是不是质数，结合IntStream版</span></span><br><span class="line">		Predicate&lt;Integer&gt; p2 = n-&gt;&#123;</span><br><span class="line">			IntStream ist = IntStream.rangeClosed(<span class="number">2</span>, (<span class="keyword">int</span>)Math.sqrt(n));</span><br><span class="line">			<span class="keyword">return</span> ist.noneMatch(i-&gt;n%i==<span class="number">0</span>);<span class="comment">//括号里给个谓词，如果都不满足就返回true</span></span><br><span class="line">		&#125;;</span><br><span class="line"></span><br><span class="line">		System.out.println(p2.test(<span class="number">100</span>));</span><br><span class="line">		System.out.println(p2.test(<span class="number">101</span>));</span><br><span class="line"></span><br><span class="line">		<span class="comment">//流的构建的案例	IntStream.iterate</span></span><br><span class="line">         <span class="keyword">int</span> x = <span class="number">8000</span>;</span><br><span class="line">        <span class="comment">//流里装的是所有的自然数  无限流</span></span><br><span class="line">        IntStream stream = IntStream.iterate(<span class="number">2</span>, i-&gt;i+<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//打印出第n个质数</span></span><br><span class="line">        <span class="keyword">int</span> result = stream.filter(n-&gt;&#123;</span><br><span class="line">            IntStream ist = IntStream.rangeClosed(<span class="number">2</span>, (<span class="keyword">int</span>)Math.sqrt(n));</span><br><span class="line">            <span class="keyword">return</span> ist.noneMatch(i-&gt;n%i==<span class="number">0</span>);</span><br><span class="line">            <span class="comment">//跳过前面n-1个，再找到一个，返回的是OptionalInt，再调getAsInt()拿到值</span></span><br><span class="line">        &#125;).skip(x-<span class="number">1</span>).findFirst().getAsInt();</span><br><span class="line"></span><br><span class="line">        System.out.println(result);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//流里装的都是随机数</span></span><br><span class="line">        DoubleStream stream2 = DoubleStream.generate(Math::random);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h3 id="流的创建"><a href="#流的创建" class="headerlink" title="流的创建"></a>流的创建</h3><p>之前都是拿集合调Stream方法创建</p>
<p>Stream.iterate：通过迭代的方式生成一个流。可以创建一个无限流</p>
<p>​                        第一个参数，初始值</p>
<p>​                        第二个参数，迭代地计算出流里的每一项</p>
<p><a href="https://raw.githubusercontent.com/j8130/picBed/master/img/20200221001444.png" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt data-src="https://raw.githubusercontent.com/j8130/picBed/master/img/20200221001444.png" class="lazyload" title></a></p>
<p>案例</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jiasy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Files;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Paths;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStream_create</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        Stream&lt;String&gt; stream1 = Stream.of(<span class="string">"ABC"</span>,<span class="string">"DEF"</span>,<span class="string">"XYZ"</span>);</span><br><span class="line">        Stream&lt;String&gt; stream2 = Arrays.stream(<span class="keyword">new</span> String[]&#123;<span class="string">"ABC"</span>,<span class="string">"DEF"</span>,<span class="string">"XYZ"</span>&#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//自动读取一个字符文件，然后把文件中每行作为一个字符串读取放进流里</span></span><br><span class="line">        <span class="comment">//Files.lines（路径，字符集）</span></span><br><span class="line">        Stream&lt;String&gt; stream3 = Files.lines(Paths.get(<span class="string">"a.txt"</span>), Charset.defaultCharset());</span><br><span class="line">        stream3.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>tips：Files类里有一个方法copy，可以实现文件copy</p>
<h3 id="流的并发"><a href="#流的并发" class="headerlink" title="流的并发"></a>流的并发</h3><p>==使流可以更高效的处理数据== </p>
<p>在流内部做处理，可以很好的处理并发问题</p>
<blockquote>
<ul>
<li>Stream：parallelStream()       取代     Stream()<ul>
<li>parallelStream()获得的流在对流操作时是使用并发的方式，启动多线程处理数据，什么都不用管，自动创建线程池，线程池数量是CPU核数，内部使用Fork-Join框架</li>
</ul>
</li>
<li>数值流：parallel（）</li>
<li>内部使用Fork-Join框架</li>
<li>对比  前n个long求和的例子</li>
</ul>
</blockquote>
<p>前n个长整数求和</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">java</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jiasy.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.stream.LongStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStream_parallel</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = <span class="number">1000000</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//前n个长整数求和</span></span><br><span class="line">        <span class="comment">//得到一个从一到n的长整数流</span></span><br><span class="line">        LongStream stream =LongStream.rangeClosed(<span class="number">1</span>, n);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> t1 = System.nanoTime();</span><br><span class="line">        <span class="comment">//流里有一个求和方法</span></span><br><span class="line">        <span class="keyword">long</span> result = stream.sum();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> t2 = System.nanoTime();</span><br><span class="line">        System.out.println((t2-t1)/<span class="number">1E9</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        LongStream stream2 = LongStream.rangeClosed(<span class="number">1</span>,n);</span><br><span class="line">        t1 = System.nanoTime();</span><br><span class="line">        <span class="comment">//.parallel()变成一个并行流，允许多线程并发执行操作</span></span><br><span class="line">        stream2 = stream2.parallel();</span><br><span class="line">        result = stream2.sum();</span><br><span class="line"></span><br><span class="line">        t2 = System.nanoTime();</span><br><span class="line">        System.out.println((t2-t1)/<span class="number">1E9</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>





























</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">贾沈阳</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/02/20/Java8%E6%96%B0%E7%89%B9%E6%80%A7/">http://yoursite.com/2020/02/20/Java8%E6%96%B0%E7%89%B9%E6%80%A7/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com">Hexo</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/jdk8/">jdk8    </a></div><div class="post_share"><div class="social-share" data-image="https://images.pexels.com/photos/3755760/pexels-photo-3755760.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/02/28/HTTP%E7%8A%B6%E6%80%81%E7%A0%81%E9%80%9F%E6%9F%A5/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>HTTP状态码速查</span></div></a></div><div class="next-post pull_right"><a href="/2020/02/18/%E8%87%AA%E5%BB%BA%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%B8%A9%E5%9D%91/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>自建服务器踩坑</span></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'http://yoursite.com/2020/02/20/Java8%E6%96%B0%E7%89%B9%E6%80%A7/';
  this.page.identifier = '2020/02/20/Java8新特性/';
  this.page.title = 'Java8新特性';
}
var d = document, s = d.createElement('script');
s.src = "https://" + 'jia-chen-yang-de-wang-zhan' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 By 贾沈阳</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>